<div *ngIf="company !== undefined && providers !== undefined" class="flex-container">
    <div class="flex-header">
        <h4>Contacts</h4>
        <button class="ui active button"> <i class="comments icon"></i> START A CHAT </button>
    </div>
    <div *ngIf="phones !== undefined" class="flex-row">
        <div class="flex-column">
            <div class="phones">
                <label>Phone</label>
                <div class="description flex-style">
                    <div *ngFor="let phone of phones">
                        <a *ngIf="phone.Id !== selectedPhone.Id; else phoneEdit" (click)="onPhoneSelect(phone)" class="ui label contact">
                            <i class="colored call icon"></i> {{phone.Value}}
                        </a>
                        <i *ngIf="phone.Id !== selectedPhone.Id" (click)="removeContact(phone)" class="remove link icon contact-remove-icon"></i>
                    </div>
                    <div>
                        <a *ngIf="!editPhoneOpen;  else phoneEdit" (click)="editToggle('phone')" class="ui label contact">
                            <i class="plus icon"></i>
                        </a>
                    </div>
                    <ng-template #phoneEdit>
                        <div class="ui right action mini left icon input contact-edit">
                            <i class="colored call icon"></i>
                            <input type="text" [(ngModel)]="selectedPhone.Value" name="phone" placeholder="+380 (XX) XXXXXXX">
                            <button (click)="selectedPhone.Id !== null ? updateContact(selectedPhone) : createContact(selectedPhone)" class="ui basic tiny button">Save</button>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-row">
        <div class="flex-column">
            <div class="emails">
                <label>Email</label>
                <div class="description flex-style">
                    <div *ngFor="let email of emails">
                        <a *ngIf="email.Id !== selectedEmail.Id; else emailEdit" (click)="onEmailSelect(email)" class="ui label contact">
                            <i class="colored mail icon"></i> {{email.Value}}
                        </a>
                        <i *ngIf="email.Id !== selectedEmail.Id" (click)="removeContact(email)" class="remove link icon contact-remove-icon"></i>
                    </div>
                    <div>
                        <a *ngIf="!editEmailOpen;  else emailEdit" (click)="editToggle('email')" class="ui label contact">
                            <i class="plus icon"></i>
                        </a>
                    </div>
                    <ng-template #emailEdit>
                        <div class="ui right action mini left icon input contact-edit">
                            <i class="colored call icon"></i>
                            <input type="text" [(ngModel)]="selectedEmail.Value" name="email" placeholder="example@e.mail">
                            <button (click)="selectedEmail.Id !== null ? updateContact(selectedEmail) : createContact(selectedEmail)" class="ui basic tiny button">Save</button>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-row">
        <div class="flex-column">
            <div class="messangers">
                <label>Messengers</label>
                <div class="description flex-style">
                    <div *ngFor="let messenger of messengers">
                        <a *ngIf="messenger.Id !== selectedMessenger.Id; else selectedMessengerEdit" (click)="onMessengerSelect(messenger)" class="ui label contact">
                            <i class="colored {{messenger.Provider}} icon"></i> {{messenger.Value}}
                        </a>
                        <i *ngIf="messenger.Id !== selectedMessenger.Id" (click)="removeContact(messenger)" class="remove link icon contact-remove-icon"></i>
                        <ng-template #selectedMessengerEdit>
                            <div class="ui right action mini left icon input contact-edit">
                                <i class="colored {{messenger.Provider}} icon"></i>
                                <input type="text" [(ngModel)]="selectedMessenger.Value" name="messenger" placeholder="NICKNAME">
                                <button (click)="selectedMessenger.Id !== null ? updateContact(selectedMessenger) : createContact(selectedMessenger)" class="ui basic tiny button">Save</button>
                            </div>
                        </ng-template>
                    </div>
                    <div>
                        <a *ngIf="!editMessengerOpen;  else newMessengerEdit" (click)="editToggle('messenger')" class="ui label contact">
                            <i class="plus icon"></i>
                        </a>
                    </div>
                    <ng-template #newMessengerEdit>
                        <div class="ui form contact-edit">
                            <div class="inline fields">
                                <div class="field">
                                    <sui-select *ngIf="selectedMessenger.ProviderId === null" class="ui mini input selection" [(ngModel)]="selectedProvider" [options]="messengerProviders" name="contactProvider" labelField="Name" placeholder="CONTACT TYPE" #select>
                                        <sui-select-option *ngFor="let provider of messengerProviders" [value]="provider">
                                        </sui-select-option>
                                    </sui-select>
                                </div>
                                <div class="field">
                                    <div class="ui right action mini input">
                                        <input type="text" [(ngModel)]="selectedMessenger.Value" name="messenger" placeholder="NICKNAME">
                                        <button (click)="selectedMessenger.Id !== null ? updateContact(selectedMessenger) : createContact(selectedMessenger)" class="ui basic tiny button">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-row">
        <div class="flex-column">
            <div class="socials">
                <label>Socials</label>
                <div class="description flex-style">
                    <div *ngFor="let social of socials">
                        <a *ngIf="social.Id !== selectedSocial.Id; else selectedSocialEdit" (click)="onSocialSelect(social)" class="ui label contact">
                            <i class="colored {{social.Provider}} icon"></i> {{social.Value}}
                        </a>
                        <i *ngIf="social.Id !== selectedSocial.Id" (click)="removeContact(social)" class="remove link icon contact-remove-icon"></i>
                        <ng-template #selectedSocialEdit>
                            <div class="ui right action mini left icon input contact-edit">
                                <i class="colored {{social.Provider}} icon"></i>
                                <input type="text" [(ngModel)]="selectedSocial.Value" name="social" placeholder="NICKNAME">
                                <button (click)="selectedSocial.Id !== null ? updateContact(selectedSocial) : createContact(selectedSocial)" class="ui basic tiny button">Save</button>
                            </div>
                        </ng-template>
                    </div>
                    <div>
                        <a *ngIf="!editSocialOpen;  else newSocialEdit" (click)="editToggle('social')" class="ui label contact">
                            <i class="plus icon"></i>
                        </a>
                    </div>
                    <ng-template #newSocialEdit>
                        <div class="ui form contact-edit">
                            <div class="inline fields">
                                <div class="field">
                                    <sui-select *ngIf="selectedSocial.ProviderId === null" class="ui mini input selection" [(ngModel)]="selectedProvider" [options]="messengerProviders" name="contactProvider" labelField="Name" placeholder="CONTACT TYPE" #select>
                                        <sui-select-option *ngFor="let provider of socialProviders" [value]="provider">
                                        </sui-select-option>
                                    </sui-select>
                                </div>
                                <div class="field">
                                    <div class="ui right action mini input">
                                        <input type="text" [(ngModel)]="selectedSocial.Value" name="social" placeholder="NICKNAME">
                                        <button (click)="selectedSocial.Id !== null ? updateContact(selectedSocial) : createContact(selectedSocial)" class="ui basic tiny button">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
</div>